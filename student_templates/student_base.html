<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Student Portal - Student Monitor{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/student_style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body { margin: 0; padding: 0; background: #f7f8fa; }
        .container { max-width: 1700px; margin: 0 auto; padding-left: 24px; padding-right: 24px; }
    </style>
</head>
<body {% if request.endpoint == 'student_login' %}class="no-scroll-page login-page"{% elif request.endpoint in ['student_dashboard', 'student_assignments'] %}class="no-scroll-page"{% endif %} style="min-height: 100vh; display: flex; flex-direction: column;">
    <header class="student-header">
        <div class="container" style="display: flex; align-items: center; justify-content: space-between; padding-top: 1rem; padding-bottom: 1rem;">
            <h1 class="student-title" style="margin: 0;">
                <a href="{{ url_for('student_dashboard') if session.student_id else url_for('student_login') }}" style="display: flex; align-items: center; gap: 0.5rem; text-decoration: none; color: inherit;">
                    <i class="fas fa-user-graduate"></i> Student Portal
                </a>
            </h1>
            <nav class="student-nav">
                {% if request.endpoint != 'student_login' %}
                <ul class="nav-links" style="display: flex; gap: 1.5rem; align-items: center; margin: 0;">
                    {% if session.student_id %}
                        {% if request.endpoint == 'student_dashboard' %}
                            <li style="display:none;"><a href="{{ url_for('student_dashboard') }}"><i class="fas fa-home"></i> Dashboard</a></li>
                            <li style="display:none;"><a href="{{ url_for('student_grades') }}"><i class="fas fa-chart-line"></i> Grades</a></li>
                            <li style="display:none;"><a href="{{ url_for('student_attendance') }}"><i class="fas fa-calendar-check"></i> Attendance</a></li>
                            <li><a href="{{ url_for('student_logout') }}"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                        {% else %}
                            <li><a href="{{ url_for('student_dashboard') }}"><i class="fas fa-home"></i> Dashboard</a></li>
                            <li><a href="{{ url_for('student_grades') }}"><i class="fas fa-chart-line"></i> Grades</a></li>
                            <li><a href="{{ url_for('student_attendance') }}"><i class="fas fa-calendar-check"></i> Attendance</a></li>
                            <li><a href="{{ url_for('student_logout') }}"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                        {% endif %}
                    {% else %}
                        {% if request.endpoint != 'student_login' %}
                            <li><a href="{{ url_for('student_login') }}"><i class="fas fa-sign-in-alt"></i> Login</a></li>
                        {% endif %}
                    {% endif %}
                </ul>
                {% endif %}
            </nav>
        </div>
    </header>
    <main class="student-main{% if request.endpoint in ['student_assignments', 'student_assignments_upcoming', 'student_assignments_completed', 'student_assignments_past_due'] %} assignments-main{% endif %}" style="flex: 1 0 auto;">
        <div class="container">
            <div class="flash-messages" style="position: fixed; top: 130px; left: 50%; transform: translateX(-50%); z-index: 9999; width: auto; max-width: 90vw; pointer-events: none;">
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category }}" style="pointer-events: auto; min-width: 250px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                <i class="fas fa-info-circle"></i>
                                {{ message }}
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
            </div>
            {% block content %}{% endblock %}
        </div>
    </main>
    <footer class="student-footer" style="flex-shrink: 0; width: 100%; position: relative; bottom: 0; left: 0;">
        <div class="container">
            <p>&copy; 2024 Student Monitor - Student Portal. All rights reserved.</p>
        </div>
    </footer>
    <script>
    // Auto-fade flash messages after 3 seconds
    window.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            document.querySelectorAll('.flash-messages .alert').forEach(function(el) {
                el.style.transition = 'opacity 0.5s';
                el.style.opacity = '0';
                setTimeout(function() { el.remove(); }, 500);
            });
        }, 3000);
    });
    </script>
</body>
</html>
