<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Student Portal - Student Monitor{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/student_style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />
    <style>
    html, body {
        height: 100%;
        min-height: 100vh;
    }
    body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    main.student-main {
        flex: 1 0 auto;
    }
    .student-footer {
        width: 100vw;
        background: #1769c4;
        color: #fff;
        text-align: center;
        padding: 0.7rem 0 0.5rem 0;
        font-size: 1rem;
        z-index: 10;
    }
    </style>
</head>
<body {% if request.endpoint == 'student_login' %}class="no-scroll-page login-page"{% elif request.endpoint in ['student_dashboard', 'student_assignments'] %}class="no-scroll-page"{% endif %}>
    <!-- Header Start (matching master admin style) -->
    <header class="student-header">
        <div class="container" style="display: flex; align-items: center; justify-content: space-between;">
            <div style="display: flex; align-items: center; gap: 1em;">
                <img src="{{ url_for('static', filename='css/pcshs_logo.png') }}" alt="PCSHS Logo" style="height: 70px; width: auto; margin-right: 12px;">
                <h1 class="student-title" style="margin-bottom: 0;">
                    <a href="{{ url_for('student_dashboard') if session.student_id else url_for('student_login') }}">
                        Student Portal
                    </a>
                </h1>
            </div>
            <nav class="student-nav">
                <ul>
                    {% if session.student_id %}
                        <li><a href="{{ url_for('student_dashboard') }}" class="{% if request.endpoint == 'student_dashboard' %}active{% endif %}"><i class="fas fa-home"></i> Dashboard</a></li>
                        <li><a href="{{ url_for('student_grades') }}" class="{% if request.endpoint == 'student_grades' %}active{% endif %}"><i class="fas fa-graduation-cap"></i> Grades</a></li>
                        <li><a href="{{ url_for('student_attendance') }}" class="{% if request.endpoint == 'student_attendance' %}active{% endif %}"><i class="fas fa-calendar-check"></i> Attendance</a></li>
                        <li><a href="{{ url_for('student_quiz') }}" class="{% if request.endpoint == 'student_quiz' %}active{% endif %}"><i class="fas fa-question-circle"></i> Quiz</a></li>
                        <li><a href="{{ url_for('student_logout') }}" class="btn btn-danger" style="margin-left: 1em;"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                    {% else %}
                        <li><a href="{{ url_for('student_login') }}"><i class="fas fa-sign-in-alt"></i> Login</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    </header>
    <!-- Header End -->
    <main class="student-main{% if request.endpoint in ['student_assignments', 'student_assignments_upcoming', 'student_assignments_completed', 'student_assignments_past_due'] %} assignments-main{% endif %}">
        <div class="container">
            <div class="flash-messages" style="position: fixed; top: 130px; left: 50%; transform: translateX(-50%); z-index: 9999; width: auto; max-width: 90vw; pointer-events: none;">
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category }}" style="pointer-events: auto; min-width: 250px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                                <i class="fas fa-info-circle"></i>
                                {{ message }}
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
            </div>
            {% block content %}{% endblock %}
        </div>
    </main>
    <footer class="student-footer">
        <p>&copy; 2024 Student Monitor - Student Portal. All rights reserved.</p>
    </footer>
    <script>
    // Auto-fade flash messages after 3 seconds
    window.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            document.querySelectorAll('.flash-messages .alert').forEach(function(el) {
                el.style.transition = 'opacity 0.5s';
                el.style.opacity = '0';
                setTimeout(function() { el.remove(); }, 500);
            });
        }, 3000);
    });
    </script>
</body>
</html>
